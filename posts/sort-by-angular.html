<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <title>각도 정렬 알고리즘(Sort by Angular) | Gumgood Blog</title>
  
  <meta name="description" content="각도 정렬 알고리즘 소개">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="각도 정렬 알고리즘(Sort by Angular)">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://gumgood.github.io/posts/sort-by-angular">
  <meta property="og:description" content="각도 정렬 알고리즘 소개">
  <meta property="og:site_name" content="Gumgood Blog">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="https://gumgood.github.io/posts/sort-by-angular">
  <meta name="twitter:title" content="각도 정렬 알고리즘(Sort by Angular)">
  <meta name="twitter:description" content="각도 정렬 알고리즘 소개">

  
    <meta property="og:image" content="https://gumgood.github.io/assets/og-image.jpg">
    <meta name="twitter:image" content="https://gumgood.github.io/assets/og-image.jpg">
  

  <link href="https://gumgood.github.io/feed.xml" type="application/rss+xml" rel="alternate" title="Gumgood Blog Last 10 blog posts" />

  

  

    
      <link rel="icon" type="image/x-icon" href="/assets/favicon-light.ico">
      <link rel="apple-touch-icon" href="/assets/apple-touch-icon-light.png">
      <link rel="stylesheet" type="text/css" href="/assets/light.css">
    

  

  <!-- mathjax support-->
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
      inlineMath: [ ['$', '$'] ],
      displayMath: [ ['$$', '$$'] ],
      processEscapes: true,
    }
});
MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
      alert("Math Processing Error: "+message[1]);
    });
MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
      alert("Math Processing Error: "+message[1]);
    });
</script>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  <!-- code highlight -->
  <link href="/assets/syntax.css" rel="stylesheet">

  <!-- google ananlytics -->
  <meta name="google-site-verification" content="keI0ZBFx59S-ScMR-4FTc81bsVJ6UTXq8JfKhsYZqsM" />

  <!-- naver search advisor -->
  <meta name="naver-site-verification" content="c3b1241687be8818c49d73438e224864dadc03e7" />

</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/" class="header-logo" title="Gumgood Blog">Gumgood Blog</a>
  <ul class="header-links">
    
      <li>
        <a href="/about" title="About me">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-about">
  <use href="/assets/about.svg#icon-about" xlink:href="/assets/about.svg#icon-about"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
      <li>
        <a href="https://github.com/gumgood" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github.svg#icon-github" xlink:href="/assets/github.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="mailto:idealwon7700@gmail.com" title="Email">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-email">
  <use href="/assets/email.svg#icon-email" xlink:href="/assets/email.svg#icon-email"></use>
</svg>

        </a>
      </li>
    
    
    
  </ul>
</nav>


  <ul class="header-tags scrollappear">
    
    
      
        <li><a href="/tag/algorithm">Algorithm</a></li>
    
      
        <li><a href="/tag/editorial">Editorial</a></li>
    
      
        <li><a href="/tag/trick">Trick</a></li>
    
  </ul>


        <article class="article scrollappear">
          <header class="article-header">
            <h1>각도 정렬 알고리즘(Sort by Angular)</h1>
            <p>각도 정렬 알고리즘 소개</p>
            <div class="article-list-footer">
  <span class="article-list-date">
    June 5, 2021
  </span>
  <span class="article-list-divider">-</span>
  <span class="article-list-minutes">
    
    
      3 minute read
    
  </span>
  <span class="article-list-divider">-</span>
  <div class="article-list-tags">
    
      
      <a href="/tag/algorithm" title="See all posts with tag 'Algorithm'">Algorithm</a>
    
  </div>
</div>
          </header>

          <div class="article-content">
            <p>2차원 좌표평면 상의 점들을 기준점에 대해 반시계 방향 순서로 정렬하는 방법에 대해 알아보겠습니다.</p>

<h2 id="외적을-이용한-방향성-판별">외적을 이용한 방향성 판별</h2>

<p>세 점 $O$, $A$, $B$의 방향성은 외적을 통해 판단할 수 있습니다. 외적 $\overrightarrow{OA} \times \overrightarrow{OB}$의 외적이 0보다 크면 반시계 방향(Counter Clock Wise)으로, $0$보다 작으면 시계 방향(Clock Wise)으로, $0$이면 일직선 상에 위치하게 됩니다.</p>

<p><img src="../assets/postimg/2021-06-05-sort-by-angular/sort-by-angular-1.png" alt="" /></p>

<p>이를 코드로 나타내면 다음과 같습니다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="k">using</span> <span class="n">lint</span> <span class="o">=</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">;</span>

<span class="k">struct</span> <span class="nc">pt</span><span class="p">{</span>
    <span class="n">lint</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="k">operator</span> <span class="o">&lt;</span> <span class="p">(</span><span class="k">const</span> <span class="n">pt</span> <span class="o">&amp;</span><span class="n">o</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">&lt;</span><span class="n">o</span><span class="p">.</span><span class="n">x</span> <span class="o">||</span> <span class="p">(</span><span class="n">x</span><span class="o">==</span><span class="n">o</span><span class="p">.</span><span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">y</span><span class="o">&lt;</span><span class="n">o</span><span class="p">.</span><span class="n">y</span><span class="p">);</span> <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">ccw</span><span class="p">(</span><span class="n">pt</span> <span class="n">o</span><span class="p">,</span><span class="n">pt</span> <span class="n">a</span><span class="p">,</span><span class="n">pt</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">lint</span> <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">o</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">o</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">o</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">o</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// 반 시계 방향</span>
    <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// 시계 방향</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// 일직선 상</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="비교-연산자">비교 연산자</h2>

<p>기준점 $O$에 대한 두 점의 외적이 0보다 큰 지 판단하면 모든 점을 각도 정렬할 수 있을 것 같습니다. 하지만 실제로 이렇게 비교 연산자를 정의하면 오류가 발생합니다. 모든 두 점 사이의 각이 $\pi$보다 작으면 대소관계에 문제가 없지만, 사이의 각이 $\pi$이상이면 <a href="https://en.cppreference.com/w/cpp/named_req/Compare">strick weak ordering</a>가 성립하지 않기 때문입니다.</p>

<p><img src="../assets/postimg/2021-06-05-sort-by-angular/sort-by-angular-2.png" alt="" /></p>

<p>이 부분은 기준점 $O$를 기준으로 두 영역으로 나눈 뒤, 같은 영역에 있을 경우에만 외적 값을 이용해 비교하는 방법으로 해결해줄 수 있습니다. 저는 (2사분면, 3사분면, -x축, -y축)과 (1사분면, 4사분면, +x축, +y축, 원점)으로 영역을 나눠줬습니다.</p>

<p><img src="../assets/postimg/2021-06-05-sort-by-angular/sort-by-angular-3.png" alt="" /></p>

<p>두 영역에 대해서는 임의로 순서를 정해주면 비교 연산이 성립하게 됩니다. 저는 오른쪽 영역이 먼저 오도록 정했습니다.</p>

<p><img src="../assets/postimg/2021-06-05-sort-by-angular/sort-by-angular-4.png" alt="" /></p>

<p>각도가 같은 경우, 상황에 맞게 순서를 정하면 됩니다. 일반적으로 원점에 가까운 순서로 정렬합니다.</p>

<h4 id="유의할-점">유의할 점</h4>

<p>정렬해야할 점들에 원점도 있는 경우 주의해야 합니다. 원점은 항상 각도가 같을 때의 조건으로 비교하게 되는데, 이에 따라 원점의 등장 순서가 달라지기 때문입니다. 원점에 가까운 순서로 정하는 경우 가장 앞에 등장하게 되고, 원점에 먼 순서로 정하는 경우 오른쪽 영역의 가장 마지막에 등장하게 됩니다.</p>

<p>대부분의 문제는 원점을 포함하지 않거나 포함하더라도 원점의 순서는 상관없는 경우가 많습니다. 따라서 원점은 예외 처리가 필요할 수도 있다는 것만 유의하시면 되겠습니다.</p>

<h2 id="구현">구현</h2>

<p>비교 연산에 필요한 외적은 $O(1)$에 구할 수 있으므로 $O(n \log n)$에 구현할 수 있습니다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">pt</span> <span class="nf">o</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="n">sort</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">p</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="n">pt</span> <span class="n">p</span><span class="p">,</span><span class="n">pt</span> <span class="n">q</span><span class="p">){</span>
    <span class="k">if</span><span class="p">((</span><span class="n">p</span><span class="o">&lt;</span><span class="n">o</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="n">q</span><span class="o">&lt;</span><span class="n">o</span><span class="p">))</span> <span class="k">return</span> <span class="n">q</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">ccw</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">q</span><span class="p">))</span> <span class="k">return</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">abs</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">&lt;</span><span class="n">abs</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">||</span> <span class="n">abs</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">&lt;</span><span class="n">abs</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

          </div>
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=%EA%B0%81%EB%8F%84+%EC%A0%95%EB%A0%AC+%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98(Sort+by+Angular)%20-%20https://gumgood.github.io/posts/sort-by-angular" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://gumgood.github.io/posts/sort-by-angular" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
          </div>

          
            <div id="disqus_thread" class="article-comments"></div>
            <script src="https://gumgood-blog.disqus.com/embed.js" async defer></script>
            <noscript>Please enable JavaScript to view the comments.</noscript>
          
        </article>
        <footer class="footer scrollappear">
  <p>
    Published by
    <a href="/about" title="About me">gumgood</a>.
  </p>
</footer>

      </div>
    </div>
  </main>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-P2YZRWZP3K"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-P2YZRWZP3K');
  </script>


<script src="/assets/vendor.js" type="text/javascript"></script>


  <script src="/assets/webfonts.js" type="text/javascript"></script>



  <script src="/assets/scrollappear.js" type="text/javascript"></script>


<script src="/assets/application.js" type="text/javascript"></script>


</body>
</html>
